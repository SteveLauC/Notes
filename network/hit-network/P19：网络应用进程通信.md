### 网络应用的基础：进程间通信

* 进程：主机上运行的程序
* 同一主机上运行的进程之间如何通信：1. 进程间通信机制 2.操作系统提供
* 不同主机上运行的进程如何通信：报文交换



* 客户机进程：发起通信的进程
* 服务器继承：等待通信请求的进程



> 采用P2P架构的应用即使没有客户机和服务器，也是有客户机进程/服务器进程，因为每个主机都可能是客户机或者服务器



### 套接字：Socket

> 不同进程间通信是依靠套接字的机制来实现的

* 进程间通信利用socket发送/接受消息

* 类似于寄信当中的门：

  > 发送方将消息送到门外邮箱，发送方依赖门外的传输基础设施将消息传到接收方所在主机，并送到接收方的门外，接收方从门外获取消息

* 传输基础设施向进程提供API，这个传输基础设施就是os

  > * 传输协议的选择
  > * 参数的设置



### 如何寻址进程

* 既然是不同主机上的进程间通信，那么每个进程必须拥有**标识符**

> 是不同主机间的进程，首先肯定要找到主机

* 如何寻址主机？ IP地址(可以标识唯一的主机)

> 但是找到了主机后，一个主机又有许多的进程(网络应用听着歌又聊着天)，到底是哪个进程呢？

* 如何在一台主机上寻找进程？ 端口号/Port number

  > * 为主机上每个需要通信的进程分配一个端口号
  > * HTTP Sever：80
  > * Mail Server：25

* 进程的标识符：IP地址+端口号 可以找到别的主机上的任一进程



### 应用层协议

> 网络应用需要遵循应用层协议，有公开协议和私有协议。公开协议是由RFC定义的，是开放的



### 应用层协议的内容

> 协议的3要素：语法语义和

* 消息的类型(type)
  * 请求消息
  * 响应消息
* 消息的语法格式
  * 消息中有哪些字段
  * 每个字段如何描述
* 字段的语义
  * 字段中信息的含义
* 规则
  * 进程何时发送消息/响应消息
  * 进程如何发送/响应消息







