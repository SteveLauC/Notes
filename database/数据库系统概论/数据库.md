# 数据库



## 简答题	5 x 5分 = 25分

### 数据模型	`p14`

-   **概念模型**  也称信息模型，它是按用户的观点来对数据和信息建模，用于数据库设计
-   **逻辑模型和物理模型** 
    -   **逻辑模型**主要包括网状模型、层次模型、关系模型、面向对象数据模型、对象关系数据模型、半结构化数据模型等。按计算机系统的观点对数据建模，用于DBMS实现
    -   **物理模型**是对数据最底层的抽象，描述数据在系统内部的表示方式和存取方法，在磁盘或磁带上的存储方式和存取方法



### 常用的数据模型	`p18`

-   **层次模型**	树形结构
-   **网状模型**
-   **关系模型**
-   **面向对象数据模型**
-   **对象关系数据模型**
-   **半结构化数据模型**



### 三级模式结构	`p29`

![](./7.jpg)

1.  **模式**
-   模式也称为逻辑模式
    -   数据库中全体数据的逻辑结构和特征的描述
    -   是所有用户的公共数据视图
    -   一个数据库只有一个模式
    -   是数据库系统模式结构的中间层
    
2.  **外模式**

    -   外模式也称为子模式

    -   数据库用户（包括应用程序员和最终用户）使用的局部数据的逻辑结构和特征的描述
    -   数据库用户的数据视图，是与某一应用有关的数据的逻辑表示
    -   介于模式与应用之间

3.  **内模式**

    -   内模式也称为存储模式
    -   是数据物理结构和存储方式的描述
    -   是数据在数据库内部的表示方式
    -   一个数据库只有一个内模式



### 二级映像	`p30`

-   **外模式／模式映像**
    -   模式是数据的全局逻辑结构，外模式是数据的局部逻辑结构
    -   同一个模式可以有任意多个外模式
    -   当模式改变时，数据库管理员对**外模式／模式映象**作相应改变，使外模式保持不变。应用程序是依据数据的外模式编写的，应用程序不必修改，保证了数据与程序的逻辑独立性，简称**数据的逻辑独立性**
-   **模式／内模式映像** 
    -   模式／内模式映象定义了数据全局逻辑结构与存储结构之间的对应关系
    -   数据库中模式／内模式映象是唯一的
    -   当数据库的存储结构改变了，数据库管理员修改**模式／内模式映象**，使模式保持不变，应用程序不受影响。保证了数据与程序的物理独立性，简称**数据的物理独立性**



### 基本的关系操作	`p43`

-   **选择**
-   **投影**
-   **并**
-   **差**
-   **笛卡尔积**



### 关系的完整性	`p45`	`p158`

-   **实体完整性**	(主键`primary key`)
-   **参照完整性**    (外键`foreign key`)
-   **用户定义完整性**



### 关系模式	`p177`

由五部分组成，是一个五元组	`R(U,D,DOM,F)`

-   R		是关系名
-   U        为一组属性（属性全集）
-   D        为属性组U中的属性所来自的域
-   DOM  为属性到域的映射
-   F         为属性组U上的数据依赖集



###  范式	`p182`

-   **1NF**

    每个分量必须是不可分开的基本数据项

-   **2NF**

    在**1NF**的基础上，非主属性完全依赖于主关键字（去部分依赖）

-   **3NF**

    在**2NF**的基础上，属性不依赖于其它非主属性（去传递依赖）

-   **BCNF**

    在**3NF**的基础上，每一个决定因素都包含候选码
    
    所有非主属性对每一个候选键都是完全函数依赖
    
    所有的主属性对每一个不包含它的候选键，也是完全函数依赖
    
    没有任何属性完全函数依赖于非候选键的任何一组属性



### 判断关系模式的好坏

-   好的关系模式应当不会发生**插入异常**、**删除异常**和**更新异常**，**数据冗余**尽可能的少





## 操作题	5 x 5分 = 25分

### 表

```mysql
-- 创建表
CREATE TABLE Persons (
    personID int,
    lastName varchar(255),
    firstName varchar(255),
    address varchar(255),
    city varchar(255)
    PRIMARY KEY (`personID`) USING BTREE,
);

-- 修改表
ALTER TABLE Persons ADD birthday date;

-- 删除表
DROP TABLE Persons;
```

### 数据

```mysql
-- 插入数据
INSERT INTO 表名 [(属性1[, 属性2[, 属性3])]
VALUES (数据1, 数据2, 数据3);
                 
-- 插入查询结果
INSERT INTO 表名 [(属性1[, 属性2[, 属性3])]
查询语句;

-- 修改数据
UPDATE 表名
SET 属性=表达式
WHERE 条件;

-- 修改查询结果
UPDATE 表名
SET 属性=表达式
WHERE 条件=查询语句;

-- 删除某一数据
DELETE FROM 表名
WHER 条件;

-- 删除整个数据
DELETE FROM 表名;

-- 删除查询结果
DELETE FROM 表名
WHERE 条件=查询语句;
```



### 视图

```mysql
-- 建立视图
CREATE VIEW 视图名 [(<列名>)[,<列名>]]
AS 子查询
[WITH CHECK OPTION];
```

查找、更新等操作和查询数据库都一样



### 关系代数表达式







## 证明题	10分

### Armstrong公理	`p190`

#### 三大定律

-   **自反律**

    若`Y ⊆ X ⊆ U`，则`X → Y`为`F`所蕴涵

    ![1](C:\常用\学习\大三\数据库\期末\1.jpg)

-   **增广律**

    若`X → Y`为`F`所蕴含，且`Z ⊆ U`，则`XZ → YZ`为`F`所蕴涵

    ![2](C:\常用\学习\大三\数据库\期末\2.jpg)

-   **传递律**

    若`x → Y`及`Y → Z`为`F`所蕴涵，则`X → Z`为`F`所蕴涵
    
    ![3](C:\常用\学习\大三\数据库\期末\3.jpg)

#### 三条推理规则

-   **合并规则**

    右部属性合并：`X → Y, X → Z ⇔ X → YZ`

    ![](./4.jpg)

-   **伪传递规则**

    `X → Y, WY → Z ⇒ XW → Z`

    ![](./5.jpg)

-   **分解规则**

    `X → Y, Z ⊆ Y ⇒ X → Z`
    
    ![](./6.jpg)





##  第六章大题	5 x 3分 + 10 x 1分 = 25分

### 候选码



### 最小函数依赖

1.  右部属性单一化（将F中的所有依赖右边化为单一元素）
2.  去除左部冗余属性（去掉F中的所有依赖左边的冗余属性）
3.  去掉F中所有冗余依赖关系



### 无损连接性、保持函数依赖

-   无所连接性

    能出现一个全a行

-   保持函数依赖

    分解后没有丢失函数依赖



### 分解到3NF、BCNF







## 第七章大题	15分

### E-R图（主键下划线、外键波浪线）



### 逻辑关系表

